import { Meteor } from 'meteor/meteor'
import { WebApp } from 'meteor/webapp'
import { ConfigurationCollection } from '/imports/api/configuration'
import { AnnouncementsCollection } from '/imports/api/announcements'
import { CarousselCollection } from '/imports/api/caroussel'
import { PlanningCollection } from '/imports/api/planning'
import { RoomsCollection } from '/imports/api/rooms'
import { TimesCollection } from '/imports/api/times'

async function insertAnnouncement({ type, text }) {
  await AnnouncementsCollection.insertAsync({ type, text })
}

async function insertConfiguration({ name, value }) {
  await ConfigurationCollection.insertAsync({ name, value })
}

async function insertCaroussel({ name, image }) {
  await CarousselCollection.insertAsync({ name, image })
}

async function insertPlanning({ time, room, teacher }) {
  await PlanningCollection.insertAsync({ time, room, teacher })
}

async function insertRoom({ name }) {
  await RoomsCollection.insertAsync({ name })
}

async function insertTime({ name, rank }) {
  await TimesCollection.insertAsync({ name, rank })
}

Meteor.startup(async () => {
  // Delete all collections
  await AnnouncementsCollection.removeAsync({})
  await ConfigurationCollection.removeAsync({})
  await CarousselCollection.removeAsync({})
  await PlanningCollection.removeAsync({})
  await RoomsCollection.removeAsync({})
  await TimesCollection.removeAsync({})
  // If the Announcements collection is empty, add some data.
  if ((await AnnouncementsCollection.find().countAsync()) === 0) {
    await insertAnnouncement({
      type: 'ABSENCE',
      text: 'Le professeur de français est absent',
    })

    await insertAnnouncement({
      type: 'ABSENCE',
      text: 'Le professeur de mathématiques est absent',
    })

    await insertAnnouncement({
      type: 'ABSENCE',
      text: 'Le professeur d\'anglais est absent',
    })

    await insertAnnouncement({
      type: 'ABSENCE',
      text: 'Le professeur de physique est absent',
    })
  }
  // If the configuration collection is empty, add some data.
  if ((await ConfigurationCollection.find().countAsync()) === 0) {
    await insertConfiguration({
      name: 'enterprise_name',
      value: 'Lycée Georges Brassens',
    })
  }
  // If the Caroussel collection is empty, add some data.
  if ((await CarousselCollection.find().countAsync()) === 0) {
    await insertCaroussel({
      name: "image1",
      image: "data:image/png;base64,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"
    })
    await insertCaroussel({
      name: "image2",
      image: "data:image/png;base64,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"
    })
    await insertCaroussel({
      name: "image3",
      image: "data:image/png;base64,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"
    })
    await insertCaroussel({
      name: "image4",
      image: "data:image/png;base64,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"
    })
  }
  // If the Planning collection is empty, add some data.
  if (PlanningCollection.find().count() === 0) {
    await insertPlanning({
      time: 'M1',
      room: 'A10',
      teacher: 'M. Dupont',
    })
    await insertPlanning({
      time: 'M2',
      room: 'A20',
      teacher: 'M. Xoer',
    })
  }
  // If the Time collection is empty, add some data.
  if (TimesCollection.find().count() === 0) {
    await insertTime({
      name: 'M1',
      rank: 1,
    })
    await insertTime({
      name: 'M2',
      rank: 2,
    })
  }
  // If the Room collection is empty, add some data.
  if (RoomsCollection.find().count() === 0) {
    await insertRoom({
      name: 'A10',
    })
    await insertRoom({
      name: 'A20',
    })
  }
});

WebApp.connectHandlers.use('/api/configuration', (req, res) => {
  res.writeHead(200)
  res.end(JSON.stringify(ConfigurationCollection.find().fetch()))
});

WebApp.connectHandlers.use('/api/announcements', (req, res) => {
  res.writeHead(200)
  res.end(JSON.stringify(AnnouncementsCollection.find().fetch()))
});

WebApp.connectHandlers.use('/api/caroussel', (req, res) => {
  res.writeHead(200)
  res.end(JSON.stringify(CarousselCollection.find().fetch()))
});

WebApp.connectHandlers.use('/api/planning', (req, res) => {
  res.writeHead(200)
  res.end(JSON.stringify(PlanningCollection.find().fetch()))
});

WebApp.connectHandlers.use('/api/times', (req, res) => {
  res.writeHead(200)
  res.end(JSON.stringify(TimesCollection.find().fetch()))
});

WebApp.connectHandlers.use('/api/rooms', (req, res) => {
  res.writeHead(200)
  res.end(JSON.stringify(RoomsCollection.find().fetch()))
});